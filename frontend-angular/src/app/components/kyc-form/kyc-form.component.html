<div class="max-w-3xl mx-auto p-6 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 shadow-lg rounded-lg animate-fade-in">
  <!-- DARK MODE TOGGLE SWITCH -->
  <div class="flex justify-end items-center gap-2 mb-4">
    <span class="text-sm font-medium">Dark Mode</span>
    <label class="relative inline-flex items-center cursor-pointer">
      <input type="checkbox" class="sr-only peer" [checked]="isDarkMode" (change)="toggleDarkMode()" />
      <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-400 dark:bg-gray-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
    </label>
  </div>


  <h2 class="text-3xl font-bold mb-6 text-center">Mutual Fund Investment KYC</h2>

  <form (ngSubmit)="submitForm()" #kycForm="ngForm" class="space-y-6">
    <!-- Personal Details -->
    <section>
      <h3 class="text-xl font-semibold mb-2">Personal Details</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input class="input-field" type="text" name="name" placeholder="Full Name" [(ngModel)]="kyc.name" required />
        <input class="input-field" type="text" name="pan" placeholder="PAN" [(ngModel)]="kyc.pan" required />
        <input class="input-field" type="date" name="dob" [(ngModel)]="kyc.dob" required />
        <select class="input-field" name="gender" [(ngModel)]="kyc.gender" required>
          <option value="" disabled selected>Select Gender</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>
        <input class="input-field" type="tel" name="mobile" placeholder="Mobile" [(ngModel)]="kyc.mobile" required />
        <input class="input-field" type="email" name="email" placeholder="Email" [(ngModel)]="kyc.email" required />
      </div>
    </section>

    <!-- Address -->
    <section>
      <h3 class="text-xl font-semibold mb-2">Address</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input class="input-field" type="text" name="address" placeholder="Address Line" [(ngModel)]="kyc.address" required />
        <input class="input-field" type="text" name="city" placeholder="City" [(ngModel)]="kyc.city" required />
        <input class="input-field" type="text" name="state" placeholder="State" [(ngModel)]="kyc.state" required />
        <input class="input-field" type="text" name="pincode" placeholder="Pincode" [(ngModel)]="kyc.pincode" required />
      </div>
    </section>

    <!-- Bank Details -->
    <section>
      <h3 class="text-xl font-semibold mb-2">Bank Details</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input class="input-field" type="text" name="accountHolder" placeholder="Account Holder Name" [(ngModel)]="kyc.accountHolder" required />
        <input class="input-field" type="text" name="accountNumber" placeholder="Account Number" [(ngModel)]="kyc.accountNumber" required />
        <input class="input-field" type="text" name="ifsc" placeholder="IFSC Code" [(ngModel)]="kyc.ifsc" required />
        <input class="input-field" type="text" name="bankName" placeholder="Bank Name" [(ngModel)]="kyc.bankName" required />
      </div>
    </section>

    <!-- Investment -->
    <section>
      <h3 class="text-xl font-semibold mb-2">Investment Details</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input class="input-field" type="text" name="fund" placeholder="Fund Name" [(ngModel)]="kyc.fund" required />
        <input class="input-field" type="number" name="amount" placeholder="Amount" [(ngModel)]="kyc.amount" required />
        <select class="input-field" name="type" [(ngModel)]="kyc.investmentType" required>
          <option value="" disabled selected>Type</option>
          <option>SIP</option>
          <option>Lump Sum</option>
        </select>
        <input class="input-field" type="date" name="startDate" [(ngModel)]="kyc.startDate" required />
      </div>
    </section>

    <!-- Camera -->
    <section class="mt-4">
      <h3 class="text-xl font-semibold mb-2">Document Capture</h3>
      <video #video autoplay playsinline muted class="w-full mt-2 border rounded-md shadow-md dark:border-gray-600 dark:bg-gray-700"></video>
      <div class="flex gap-2 mt-2">
        <button type="button" (click)="captureImage()" class="btn-blue">📸 Capture</button>
        <button type="button" (click)="switchCamera()" class="btn-yellow">🔄 Switch Camera</button>
      </div>
    </section>

    


    <!-- Preview Image -->
    <div *ngIf="previewImage && !showPreview" class="mt-4 w-full">
      <button type="button" class="btn-preview-toggle" (click)="togglePreview()">
        📷 View Captured Image
      </button>
    </div>

    <!-- Preview Toggle -->
    <div *ngIf="showPreview" class="mt-4">
      <div class="preview-container">
        <img [src]="previewImage" class="preview-image" />
        <button type="button" class="btn-preview-toggle mt-4" (click)="togglePreview()">
          ❌ Hide Preview
        </button>
      </div>
    </div>

    <!-- Submit and Export -->
    <div class="flex flex-col sm:flex-row gap-4 justify-center mt-6">
      <button type="submit" class="btn-green w-full sm:w-auto">✅ Submit</button>
      <button type="button" (click)="downloadExcel()" class="btn-blue w-full sm:w-auto">📊 Export to Excel</button>
    </div>
  </form>
</div>
